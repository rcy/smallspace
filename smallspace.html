<head>
  <title>smallspace</title>
</head>

<body>
  <div class="container">
    <div class="row">
      {{> header}}
    </div>
    {{#if currentUser}}
      {{#if currentSpace}}
        {{> space}}
      {{else}}
        {{> spaceList}}
      {{/if}}
    {{else}}
      {{#unless loggingIn}}
      <center>
        <img src="5672902086_98737b1dfe_b.jpg" width="800" />
      </center>
      {{/unless}}
    {{/if}}
  </div>
</body>

<template name="header">
  <h2>
    <a href="#" class="title">smallspace</a>
    <span>
      {{currentSpace}}
    </span>
    <span class="pull-right">
      {{loginButtons align="right"}}
    </span>
  </h2>
  <hr>
</template>

<template name="spaceList">
  <h1>My Small Spaces</h1>
  <ul>
    {{#each spaces}}
    <li><a href="{{_id}}">{{name}}</a></li>
    {{/each}}
  </ul>
</template>

<template name="space">
  <div class="row">
    <div class="span6">
      {{> chatWindow}}
    </div>
    <div class="span6">
      {{> links}}
    </div>
  </div>
</template>


<template name="links">
  <div class="links">
    <h6>recent links</h6>
    {{#each links}}
    {{> link}}
    {{/each}}
  </div>
</template>

<template name="link">
  <div class="link">
    {{#if isOwner}}
    <button class="pull-right btn btn-small delete">delete</button>
    {{/if}}
    <div>posted by <strong>{{user}}</strong> {{when}}</div>
    <div>{{{link}}}</div>
    <div>{{{inline}}}</div>
  </div>
  <hr>
</template>

<template name="chatWindow">
  <div class="chat-container">
    <div class="chat">
      {{#each messages}}
      {{> message}}
      {{/each}}
    </div>

    <form>
      <input id="abc" autofocus="1" class="span6" type="text" />
    </form>
  </div>
</template>

<template name="message">
  <div class="message">
    {{when}} &lt;<strong>{{user}}</strong>&gt; {{text}}
  </div>
</template>
